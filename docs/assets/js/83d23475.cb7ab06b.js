"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2622],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),p=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,h=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return a?n.createElement(h,l(l({ref:t},c),{},{components:a})):n.createElement(h,l({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<o;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2510:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={},l="SLAM Notes",s={unversionedId:"Examples/slam",id:"version-v3.0.3/Examples/slam",title:"SLAM Notes",description:"LUCI as a sensor platform allows for a jump start on applying a SLAM methodology to power wheelchairs.",source:"@site/versioned_docs/version-v3.0.3/4_Examples/slam.md",sourceDirName:"4_Examples",slug:"/Examples/slam",permalink:"/luci-sdk-docs/Examples/slam",draft:!1,tags:[],version:"v3.0.3",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Usage Examples",permalink:"/luci-sdk-docs/Examples/examples"},next:{title:"Troubleshooting",permalink:"/luci-sdk-docs/troubleshooting"}},i={},p=[{value:"Packages",id:"packages",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Data",id:"data",level:2},{value:"2D vs 3D",id:"2d-vs-3d",level:4},{value:"Ultrasonic Data",id:"ultrasonic-data",level:4},{value:"JS to Twist Message",id:"js-to-twist-message",level:2}],c={toc:p};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"slam-notes"},"SLAM Notes"),(0,r.kt)("p",null,"LUCI as a sensor platform allows for a jump start on applying a SLAM methodology to power wheelchairs."),(0,r.kt)("p",null,"While LUCI does not offer a existing SLAM package for the ROS2 SDK here are a few tips for a successful implementation."),(0,r.kt)("h2",{id:"packages"},"Packages"),(0,r.kt)("p",null,"There are two main SLAM packages that have been successful with partners."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"http://wiki.ros.org/slam_toolbox"},"slam_toolbox")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"http://wiki.ros.org/gmapping"},"gmapping"))),(0,r.kt)("p",null,"Both have their pros and cons but can run successfully with only LUCI data streams."),(0,r.kt)("h2",{id:"architecture"},"Architecture"),(0,r.kt)("p",null,"Here is a sample design of an implementation and what the resulting map looked like\n",(0,r.kt)("img",{alt:"Architecture",src:a(2883).Z,width:"1365",height:"1340"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Map",src:a(1761).Z,width:"669",height:"577"})),(0,r.kt)("h2",{id:"data"},"Data"),(0,r.kt)("h4",{id:"2d-vs-3d"},"2D vs 3D"),(0,r.kt)("p",null,"While some of the SLAM nodes will expect a 2D point cloud and LUCI provides a 3D cloud you will need some method of converting our provided feed to 2D.\nThis can be done in a couple of ways."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Implement a z height flatten filter that casts all points to a single z height."),(0,r.kt)("li",{parentName:"ol"},"Run through an existing pointcloud->lidar converter node. This one proved decent.",(0,r.kt)("br",{parentName:"li"}),(0,r.kt)("a",{parentName:"li",href:"https://github.com/ros-perception/pointcloud_to_laserscan"},"pointcloud_to_laserscan"))),(0,r.kt)("b",null,"_Note: Not all SLAM nodes need 2D and 3D data is definitely the better choice to use for LUCI if able_"),(0,r.kt)("p",null,"Casting points to 2D produces a decent map but will struggle with localization later."),(0,r.kt)("h4",{id:"ultrasonic-data"},"Ultrasonic Data"),(0,r.kt)("p",null,"As LUCI produces ultrasonic curves as points it is recommended that you do ",(0,r.kt)("b",null,"NOT")," include them in the mapping of an environment as they will add curved noise to your map."),(0,r.kt)("h2",{id:"js-to-twist-message"},"JS to Twist Message"),(0,r.kt)("p",null,"As LUCI and wheelchairs operate with a left-right/forward-back joystick and most ROS2 packages expect a ",(0,r.kt)("a",{parentName:"p",href:"http://docs.ros.org/en/melodic/api/geometry_msgs/html/msg/Twist.html"},"Twist")," message a conversion node will be required."),(0,r.kt)("p",null,"Here are two different methods LUCI has played with to varying degrees of success that may be of help."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Find the max speed at a given speed setting then apply a linear fit mapping JS for 0-Max speed in a piece-wise function that is stepped based on speed settings."),(0,r.kt)("li",{parentName:"ol"},"Create a PID loop that takes in a chairs speed (already exposed through the luci_grpc_interface) as well as a goal speed and output a JS value of 0-100. ")),(0,r.kt)("p",null,"Either can be run as a \u201cconverter\u201d node in between the SLAM node and the grpc-endpoint node. We recommend the PID approach."))}d.isMDXComponent=!0},1761:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/map-a002ee660962c7349834dbd6e8f1035e.png"},2883:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/slam-60c5e001461511c8fc92bcb71003924d.png"}}]);